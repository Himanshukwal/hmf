

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>hmf &mdash; hmf 1.1.10 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.1.10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="hmf 1.1.10 documentation" href="#" />
    <link rel="next" title="API" href="api.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api.html" title="API"
             accesskey="N">next</a> |</li>
        <li><a href="#">hmf 1.1.10 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="hmf">
<h1>hmf<a class="headerlink" href="#hmf" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>hmf<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<a class="reference external image-reference" href="https://travis-ci.org/steven-murray/hmf"><img alt="https://travis-ci.org/steven-murray/hmf.png?branch=master" src="https://travis-ci.org/steven-murray/hmf.png?branch=master" /></a>
<p><tt class="docutils literal"><span class="pre">hmf</span></tt> is a python application that provides a flexible and simple way to calculate the
Halo Mass Function for any input cosmology, redshift, dark matter model, virial
overdensity or several other variables. Addition of further variables should be simple.</p>
<p>It is also the backend to HMFcalc, the online HMF calculator at &lt;hmf.icrar.org&gt;</p>
<div class="section" id="installation">
<h3>INSTALLATION<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><dl class="first docutils">
<dt>Install all requirements in requirements.txt (all except pycamb can be</dt>
<dd><p class="first last">installed using pip)</p>
</dd>
</dl>
</li>
</ol>
<ol class="arabic">
<li><dl class="first docutils">
<dt>To install pycamb:</dt>
<dd><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">Directory</span> <span class="n">that</span> <span class="n">pycamb</span> <span class="n">source</span> <span class="n">will</span> <span class="n">live</span> <span class="ow">in</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">steven</span><span class="o">-</span><span class="n">murray</span><span class="o">/</span><span class="n">pycamb</span> <span class="o">**</span><span class="n">you</span><span class="s">&#39;ll need this fork</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cd</span> <span class="n">pycamb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">sudo</span><span class="p">]</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span> <span class="p">[</span><span class="o">--</span><span class="n">get</span><span class="o">=</span><span class="n">www</span><span class="o">.</span><span class="n">address</span><span class="o">-</span><span class="n">where</span><span class="o">-</span><span class="n">camb</span><span class="o">-</span><span class="n">code</span><span class="o">-</span><span class="n">lives</span><span class="o">.</span><span class="n">org</span><span class="p">]</span>
</pre></div>
</div>
<p class="last">The final command gives the option of automatically downloading and
compiling CAMB while installing pycamb. It cannot be done more automatically
at this point due to licensing. Alternatively, if one does not know the
location of the camb downloads, go to camb.info and follow the instructions.
Download the source directory to your pycamb folder, and untar it there.
Then use <a href="#id2"><span class="problematic" id="id3">``</span></a>python setup.py install&#8221; and it should work.</p>
</dd>
</dl>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">hmf</span></tt></p>
</li>
</ol>
</div>
<div class="section" id="usage">
<h3>USAGE<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p><cite>hmf</cite> can be used interactively (for instance in ipython) or in a script.
To use interactively, in ipython do something like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hmf</span> <span class="kn">import</span> <span class="n">Perturbations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pert</span> <span class="o">=</span> <span class="n">Perturbations</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mass_func</span> <span class="o">=</span> <span class="n">pert</span><span class="o">.</span><span class="n">dndlnm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mass_variance</span> <span class="o">=</span> <span class="n">pert</span><span class="o">.</span><span class="n">sigma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">...</span>
</pre></div>
</div>
<p>This will return a Sheth-Tormen mass function between 10^10 and 10^15 M_sun,
at redshift 0 for a default cosmology. Cosmological parameters may be passed
to the initialiser, <tt class="docutils literal"><span class="pre">Perturbations()</span></tt></p>
<p>To change the parameters (cosmological or otherwise), one should use the
<cite>update()</cite> method, if a Perturbations() object already exists. For example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pert</span> <span class="o">=</span> <span class="n">Perturbations</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pert</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">omegab</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="c">#update baryon density and redshift</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cumulative_mass_func</span> <span class="o">=</span> <span class="n">pert</span><span class="o">.</span><span class="n">ngtm</span>
</pre></div>
</div>
<p>Check the docstring of <cite>Perturbations()</cite> for all arguments allowed.</p>
</div>
<div class="section" id="history">
<h3>HISTORY<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>1.3.1 - January 06, 2014</dt>
<dd>Fixed bug in transfer read-in introduced in 1.3.0</dd>
<dt>1.3.0 - January 03, 2014</dt>
<dd>A few more documentation updates (especially tools.py)
Removed new_k_bounds function from tools.py
Added <cite>w</cite> parameter to cosmolopy dictionary in <cite>cosmo.py</cite>
Changed cosmography significantly to use cosmolopy in general
Fixed a pretty bad bug where updating h/H0 would crash the program if
only one of omegab/omegac was updated alongside it
Generally tidied up some of the update mechanisms.
API CHANGE: cosmography.py no longer exists &#8211; I&#8217;ve chosen to utilise
cosmolopy more heavily here.
Added Travis CI usage
Fixed a compatibility issue with older versions of numpy in cumulative
functions</dd>
<dt>1.2.2 - December 10, 2013</dt>
<dd>Bug in &#8220;EH&#8221; transfer function call</dd>
<dt>1.2.1 - December 6, 2013</dt>
<dd>Small bugfixes to update() method</dd>
<dt>1.2.0 - December 5, 2013</dt>
<dd>Major documentation overhaul &#8211; most docstrings are now in Sphinx/numpydoc format
Addition of cosmo module, which deals with the cosmological parameters in a cleaner way
Some tidying up of several functions.</dd>
<dt>1.1.10- October 29, 2013</dt>
<dd>Fixed bug in mltm property
Better updating &#8211; checks if update value is actually different.
Now performs a check to see if mass range is inside fit range.</dd>
<dt>1.1.9 - October 4, 2013</dt>
<dd>Fixed some issues with n(&lt;m) and M(&lt;m) causing them to give NaN&#8217;s</dd>
<dt>1.1.85- October 2, 2013</dt>
<dd>The normalization of the power spectrum now saved as an attribute (mostly
for use with the hod package... coming soon ;)</dd>
<dt>1.1.8 - September 19, 2013</dt>
<dd>Fixed small bug in SMT function which made it crash</dd>
<dt>1.1.7 - September 19, 2013</dt>
<dd>Updated &#8220;ST&#8221; fit to &#8220;SMT&#8221; fit to avoid confusion. &#8220;ST&#8221; is still available for now.
Now uses trapezoid rule for integration as it is faster.</dd>
<dt>1.1.6 - September 05, 2013</dt>
<dd>Modified comments to reflect parameters
Couple of bugfixes for fitting_functions.py
Included an option to use delta_halo as compared to critical rather than mean density (thanks to A. Vikhlinin and anonymous referree)
Fixed mass range of Tinker (thanks to J. Tinker and anonymous referee for this)</dd>
<dt>1.1.5 - September 03, 2013</dt>
<dd>Fixed bug in mgtm (thanks to J. Mirocha)
Fixed an embarrassing error in Reed07 fitting function
Fixed a bug in which dndlnm and its dependents (ngtm, etc..) were calculated wrong
if dndlog10m was called first.
Added a whole suite of tests against genmf that actually work
Fixed error in which for some choices of M, the whole extension in ngtm would be NAN and give error</dd>
<dt>1.1.4 - August 27, 2013</dt>
<dd>Added ability to change resolution in CAMB from hmf interface
(This requires a re-install of pycamb to the newest version on the fork)</dd>
<dt>1.1.3 - August 7, 2013</dt>
<dd>Added Behroozi Fit (thanks to P. Behroozi)</dd>
<dt>1.1.2 - July 02, 2013</dt>
<dd>Ability to calculate fitting functions to whatever mass you want (BEWARE!!)
Small bugfix</dd>
<dt>1.1.1 - July 02, 2013</dt>
<dd>Corrections to Watson fitting function from latest update on arXiv (thanks to W. Watson)
** Fixed units for k and transfer function ** (Thanks to A. Knebe)
Improved docstring for Perturbations class
Added Eisenstein-Hu fit to the transfer function</dd>
<dt>1.1.0 - June 27, 2013</dt>
<dd>Massive overhaul of structure
Now dependencies are tracked throughout the program, making updates even faster</dd>
<dt>1.0.10- June 24, 2013</dt>
<dd>Added dependence on Delta_vir to Tinker</dd>
<dt>1.0.9 - June 19, 2013</dt>
<dd>Fixed an error with an extra ln(10) in the mass function (quoted as dn/dlnM but actually outputting dn/dlog10M)</dd>
<dt>1.0.8 - June 19, 2013</dt>
<dd>Took out log10 from cumulative mass functions
Better cumulative mass function logic</dd>
<dt>1.0.6 - June 19, 2013</dt>
<dd>Fixed cumulative mass functions (extra factor of M was in there)</dd>
<dt>1.0.4 - June 6, 2013</dt>
<dd>Added Bhattacharya fitting function
Fixed concatenation of list and dict issue</dd>
<dt>1.0.2 - May 21, 2013</dt>
<dd>Fixed some warnings for non-updated variables passed to update()</dd>
<dt>1.0.1 - May 20, 2013</dt>
<dd>Added better warnings for non-updated variables passed to update()
Made default cosmology WMAP7</dd>
<dt>0.9.99- May 10, 2013</dt>
<dd>Added warning for k*R limits
Couple of minor bugfixes
<strong>Important</strong> Angulo fitting function corrected (arXiv version had a typo).</dd>
<dt>0.9.97- April 15, 2013</dt>
<dd>Urgent Bugfix for updating cosmology (for transfer functions)</dd>
<dt>0.9.96- April 11, 2013</dt>
<dd>Few bugfixes</dd>
<dt>0.9.95- April 09, 2013</dt>
<dd>Added cascading variable changes for optimization
Added this README
Added update() function to simply change parameters using cascading approach</dd>
<dt>0.9.9 - April 08, 2013</dt>
<dd>First version in its own package
Added pycamb integration
Removed fitting function from being a class variable
Removed overdensity form being a class variable</dd>
<dt>0.9.7 - March 18, 2013</dt>
<dd>Modified set_z() so it only does calculations necessary when z changes
Made calculation of dlnsdlnM in init since it is same for all z
Removed mean density redshift dependence</dd>
<dt>0.9.5 - March 10, 2013</dt>
<dd>The class has been in the works for almost a year now, but it currently
will calculate a mass function based on any of several fitting functions.</dd>
</dl>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>numpy &gt;= 1.6.2
scitools
scipy &gt;= 0.12.0
cosmolopy
emcee
pycamb</p>
</div>
<div class="section" id="api-documentation">
<h3>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#module-hmf.hmf">hmf</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#module-hmf.tools">tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#module-hmf.fitting_functions">fitting_functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#cosmography">cosmography</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#module-hmf.cosmo">cosmo</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<p>   api</p>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">hmf</a><ul>
<li><a class="reference internal" href="#id1">hmf</a><ul>
<li><a class="reference internal" href="#installation">INSTALLATION</a></li>
<li><a class="reference internal" href="#usage">USAGE</a></li>
<li><a class="reference internal" href="#history">HISTORY</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#api-documentation">API Documentation</a><ul>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h4>Next topic</h4>
  <p class="topless"><a href="api.html"
                        title="next chapter">API</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api.html" title="API"
             >next</a> |</li>
        <li><a href="#">hmf 1.1.10 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Steven Murray.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>